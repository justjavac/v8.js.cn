<!doctype html><html lang=zh-CN><meta charset=utf-8><title>Checking out the V8 source code · V8</title><meta content="width=device-width" name=viewport><meta content="dark light" name=color-scheme><link href=/_css/main.css rel=stylesheet><link href=/.webmanifest rel=manifest><meta content=#4285F4 name=theme-color><link href=/blog.atom rel=alternate title="V8 Atom feed" type=application/atom+xml><link href=/features.atom rel=alternate title="V8 JS/Wasm features Atom feed" type=application/atom+xml><script>document.documentElement.className+=" js"</script><meta content="This document explains how to check out the V8 source code locally." name=description><header id=header><h1><a href=/ >V8</a></h1><a href=#navigation-toggle id=nav-toggle>显示导肮</a><nav><ul><li><a href=/ >主页</a><li><a href=/blog/ >博客</a><li class=active><a href=/docs/ >文档</a><li><a href=/tools/ >工具</a><li><a href=/features title="JavaScript 和 WebAssembly 的新特性">JS/Wasm 新特性</a><li><a href=/grant>Research</a></ul></nav></header><main id=main><h1>Checking out the V8 source code</h1><p>This document explains how to check out the V8 source code locally. If you just want to browse the source online, use these links:<ul><li><a href=https://chromium.googlesource.com/v8/v8/ >browse</a><li><a href=https://chromium.googlesource.com/v8/v8/+/master>browse bleeding edge</a><li><a href=https://chromium.googlesource.com/v8/v8/+log/master>changes</a></ul><h2 id=using-git>Using Git <a href=#using-git class=bookmark>#</a></h2><p>V8’s Git repository is located at <a href=https://chromium.googlesource.com/v8/v8.git>https://chromium.googlesource.com/v8/v8.git</a>, with an official mirror on GitHub: <a href=https://github.com/v8/v8>https://github.com/v8/v8</a>.<p>Don’t just <code>git clone</code> either of these URLs! if you want to build V8 from your checkout, instead follow the instructions below to get everything set up correctly.<h2 id=instructions>Instructions <a href=#instructions class=bookmark>#</a></h2><ol><li><p>On Linux or macOS, first install Git and then <a href=https://commondatastorage.googleapis.com/chrome-infra-docs/flat/depot_tools/docs/html/depot_tools_tutorial.html#_setting_up><code>depot_tools</code></a>.<p>On Windows, follow the Chromium instructions (<a href=https://goto.google.com/building-chrome-win>for Googlers</a>, <a href=https://chromium.googlesource.com/chromium/src/+/master/docs/windows_build_instructions.md#Setting-up-Windows>for non-Googlers</a>) to install Visual Studio, Debugging tools for Windows, and <code>depot_tools</code> (which on Windows includes Git).<li><p>Update <code>depot_tools</code> by executing the following into your terminal/shell. On Windows, this has to be done in the Command Prompt (<code>cmd.exe</code>), as opposed to PowerShell or others.<pre><code>gclient
</code></pre><li><p>For <strong>push access</strong>, you need to setup a <code>.netrc</code> file with your Git password:<ol><li>Go to <a href=https://chromium.googlesource.com/new-password>https://chromium.googlesource.com/new-password</a> and log in with your committer account (usually an <code>@chromium.org</code> account). Note: creating a new password doesn’t automatically revoke any previously-created passwords. Please make sure you use the same email as the one set for <code>git config user.email</code>.<li>Have a look at the big, grey box containing shell commands. Paste those lines into your shell.</ol><li><p>Now, get the V8 source code, including all branches and dependencies:<pre class=language-bash><code class=language-bash><span class="token function">mkdir</span> ~/v8<br><span class="token builtin class-name">cd</span> ~/v8<br>fetch v8<br><span class="token builtin class-name">cd</span> v8</code></pre></ol><p>After that you’re intentionally in a detached head state.<p>Optionally you can specify how new branches should be tracked:<pre class=language-bash><code class=language-bash><span class="token function">git</span> config branch.autosetupmerge always<br><span class="token function">git</span> config branch.autosetuprebase always</code></pre><p>Alternatively, you can create new local branches like this (recommended):<pre class=language-bash><code class=language-bash><span class="token function">git</span> new-branch fix-bug-1234</code></pre><h2 id=staying-up-to-date>Staying up-to-date <a href=#staying-up-to-date class=bookmark>#</a></h2><p>Update your current branch with <code>git pull</code>. Note that if you’re not on a branch, <code>git pull</code> won’t work, and you’ll need to use <code>git fetch</code> instead.<pre class=language-bash><code class=language-bash><span class="token function">git</span> pull</code></pre><p>Sometimes dependencies of V8 are updated. You can synchronize those by running:<pre class=language-bash><code class=language-bash>gclient <span class="token function">sync</span></code></pre><h2 id=sending-code-for-reviewing>Sending code for reviewing <a href=#sending-code-for-reviewing class=bookmark>#</a></h2><pre class=language-bash><code class=language-bash><span class="token function">git</span> cl upload</code></pre><h2 id=committing>Committing <a href=#committing class=bookmark>#</a></h2><p>You can use the CQ checkbox on codereview for committing (preferred). See also the <a href=https://chromium.googlesource.com/chromium/src/+/master/docs/infra/cq.md>chromium instructions</a> for CQ flags and troubleshooting.<p>If you need more trybots than the default, add the following to your commit message on Gerrit (e.g. for adding a nosnap bot):<pre><code>CQ_INCLUDE_TRYBOTS=tryserver.v8:v8_linux_nosnap_rel
</code></pre><p>To land manually, update your branch:<pre class=language-bash><code class=language-bash><span class="token function">git</span> pull <span class="token parameter variable">--rebase</span> origin</code></pre><p>Then commit using<pre class=language-bash><code class=language-bash><span class="token function">git</span> cl land</code></pre><h2 id=try-jobs>Try jobs <a href=#try-jobs class=bookmark>#</a></h2><p>This section is only useful for V8 project members.<h3 id=creating-a-try-job-from-codereview>Creating a try job from codereview <a href=#creating-a-try-job-from-codereview class=bookmark>#</a></h3><ol><li><p>Upload a CL to Gerrit.<pre class=language-bash><code class=language-bash><span class="token function">git</span> cl upload</code></pre><li><p>Try the CL by sending a try job to the try bots like this:<pre class=language-bash><code class=language-bash><span class="token function">git</span> cl try</code></pre><li><p>Wait for the try bots to build and you get an email with the result. You can also check the try state at your patch on Gerrit.<li><p>If applying the patch fails you either need to rebase your patch or specify the V8 revision to sync to:</ol><pre class=language-bash><code class=language-bash><span class="token function">git</span> cl try <span class="token parameter variable">--revision</span><span class="token operator">=</span><span class="token number">1234</span></code></pre><h3 id=creating-a-try-job-from-a-local-branch>Creating a try job from a local branch <a href=#creating-a-try-job-from-a-local-branch class=bookmark>#</a></h3><ol><li><p>Commit some changes to a git branch in the local repo.<li><p>Try the change by sending a try job to the try bots like this:<pre class=language-bash><code class=language-bash><span class="token function">git</span> cl try</code></pre><li><p>Wait for the try bots to build and you get an email with the result. Note: There are issues with some of the replicas at the moment. Sending try jobs from codereview is recommended.</ol><h3 id=useful-arguments>Useful arguments <a href=#useful-arguments class=bookmark>#</a></h3><p>The revision argument tells the try bot what revision of the code base is used for applying your local changes to. Without the revision, <a href=https://v8-status.appspot.com/lkgr>V8’s LKGR revision</a> is used as the base.<pre class=language-bash><code class=language-bash><span class="token function">git</span> cl try <span class="token parameter variable">--revision</span><span class="token operator">=</span><span class="token number">1234</span></code></pre><p>To avoid running your try job on all bots, use the <code>--bot</code> flag with a comma-separated list of builder names. Example:<pre class=language-bash><code class=language-bash><span class="token function">git</span> cl try <span class="token parameter variable">--bot</span><span class="token operator">=</span>v8_mac_rel</code></pre><h3 id=viewing-the-try-server>Viewing the try server <a href=#viewing-the-try-server class=bookmark>#</a></h3><pre class=language-bash><code class=language-bash><span class="token function">git</span> cl try-results</code></pre><h2 id=source-code-branches>Source code branches <a href=#source-code-branches class=bookmark>#</a></h2><p>There are several different branches of V8; if you're unsure of which version to get, you most likely want the up-to-date stable version. Have a look at our <a href=/docs/release-process>Release Process</a> for more information about the different branches used.<p>You may want to follow the V8 version that Chrome is shipping on its stable (or beta) channels, see <a href=https://omahaproxy.appspot.com/ >https://omahaproxy.appspot.com/</a>.</main><footer id=footer><div><nav><a href=https://v8.dev/docs/source-code>原文</a> · <a href=/logo/ >商标</a> · <a href=/terms/ >条款</a> · <a href=https://policies.google.com/privacy/ >隐私</a> · <a href=https://twitter.com/v8js rel="me nofollow">Twitter</a> · <a href=https://github.com/justjavac/v8.js.cn/tree/master/./src/docs/source-code.md rel=nofollow>在 GitHub 编辑此页面</a></nav><dark-mode-toggle dark="Light Theme" light="Dark Theme" permanent></dark-mode-toggle></div><p><small>如无特殊说明，此 V8 项目中使用到的所有示例代码均基于 <a href=https://chromium.googlesource.com/v8/v8.git/+/master/LICENSE>V8's BSD-style license</a> 发布。页面中的文字内容采用 <a href=https://creativecommons.org/licenses/by/3.0/ >the Creative Commons Attribution 3.0 License</a> 进行许可。更详细的信息可以在 <a href=/terms#site-policies>站点策略</a> 中找到。</small></footer><script src=/_js/dark-mode-toggle.mjs type=module></script><script src=/_js/main.mjs type=module></script><script src=/_js/legacy.js nomodule></script>