<!doctype html><html lang=zh-CN><meta charset=utf-8><title>V8 release v7.3 · V8</title><meta content="width=device-width" name=viewport><meta content="dark light" name=color-scheme><link href=/_css/main.css rel=stylesheet><link href=/.webmanifest rel=manifest><meta content=#4285F4 name=theme-color><link href=/blog.atom rel=alternate title="V8 Atom feed" type=application/atom+xml><link href=/features.atom rel=alternate title="V8 JS/Wasm features Atom feed" type=application/atom+xml><script>document.documentElement.className+=" js"</script><meta content="V8 v7.3 features WebAssembly and async performance improvements, async stack traces, Object.fromEntries, String#matchAll, and much more!" name=description><header id=header><h1><a href=/ >V8</a></h1><a href=#navigation-toggle id=nav-toggle>显示导肮</a><nav><ul><li><a href=/ >主页</a><li class=active><a href=/blog/ >博客</a><li><a href=/docs/ >文档</a><li><a href=/tools/ >工具</a><li><a href=/features title="JavaScript 和 WebAssembly 的新特性">JS/Wasm 新特性</a><li><a href=/grant>Research</a></ul></nav></header><main id=main><article itemscope itemtype=http://schema.org/BlogPosting><header><h1 itemprop=headline>V8 release v7.3</h1><p class=meta>发布时间 <time datetime="2019-02-07 11:30:42" itemprop=datePublished title="2019-02-07 11:30:42">2019-02-07</time> · 标签： <a href=/blog/tags/release/ class=tag>release</a></header><div itemprop=articleBody><p>Every six weeks, we create a new branch of V8 as part of our <a href=/docs/release-process>release process</a>. Each version is branched from V8’s Git master immediately before a Chrome Beta milestone. Today we’re pleased to announce our newest branch, <a href=https://chromium.googlesource.com/v8/v8.git/+log/branch-heads/7.3>V8 version 7.3</a>, which is in beta until its release in coordination with Chrome 73 Stable in several weeks. V8 v7.3 is filled with all sorts of developer-facing goodies. This post provides a preview of some of the highlights in anticipation of the release.<h2 id=async-stack-traces>Async stack traces <a href=#async-stack-traces class=bookmark>#</a></h2><p>We are turning on <a href=/blog/fast-async#improved-developer-experience>the <code>--async-stack-traces</code> flag</a> by default. <a href=https://bit.ly/v8-zero-cost-async-stack-traces>Zero-cost async stack traces</a> make it easier to diagnose problems in production with heavily asynchronous code, as the <code>error.stack</code> property that is usually sent to log files/services now provides more insight into what caused the problem.<h2 id=faster-await>Faster <code>await</code> <a href=#faster-await class=bookmark>#</a></h2><p>Related to the above-mentioned <code>--async-stack-traces</code> flag, we’re also enabling the <code>--harmony-await-optimization</code> flag by default, which is a prerequisite for the <code>--async-stack-traces</code>. See <a href=/blog/fast-async#await-under-the-hood>faster async functions and promises</a> for more details.<h2 id=faster-wasm-startup>Faster Wasm startup <a href=#faster-wasm-startup class=bookmark>#</a></h2><p>Via optimizations to the internals of Liftoff, we improved WebAssembly compilation speed significantly without regressing the quality of the generated code. For most workloads, compilation time reduced by 15–25%.<figure><img alt="" height=371 loading=lazy src=/_img/v8-release-73/liftoff-epic.svg width=600><figcaption>Liftoff compile time on <a href=https://s3.amazonaws.com/mozilla-games/ZenGarden/EpicZenGarden.html>the Epic ZenGarden demo</a></figcaption></figure><h2 id=javascript-language-features>JavaScript language features <a href=#javascript-language-features class=bookmark>#</a></h2><p>V8 v7.3 comes with several new JavaScript language features.<h3 id=object.fromentries><code>Object.fromEntries</code> <a href=#object.fromentries class=bookmark>#</a></h3><p>The <code>Object.entries</code> API is nothing new:<pre class=language-js><code class=language-js><span class="token keyword">const</span> object <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token number">42</span><span class="token punctuation">,</span> <span class="token literal-property property">y</span><span class="token operator">:</span> <span class="token number">50</span> <span class="token punctuation">}</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> entries <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token comment">// → [['x', 42], ['y', 50]]</span></code></pre><p>Unfortunately, there’s no easy way to go from the <code>entries</code> result back to an equivalent object… until now! V8 v7.3 supports <a href=/features/object-fromentries><code>Object.fromEntries()</code></a>, a new built-in API that performs the inverse of <code>Object.entries</code>:<pre class=language-js><code class=language-js><span class="token keyword">const</span> result <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">fromEntries</span><span class="token punctuation">(</span>entries<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token comment">// → { x: 42, y: 50 }</span></code></pre><p>For more information and example use cases, see <a href=/features/object-fromentries>our <code>Object.fromEntries</code> feature explainer</a>.<h3 id=string.prototype.matchall><code>String.prototype.matchAll</code> <a href=#string.prototype.matchall class=bookmark>#</a></h3><p>A common use case of global (<code>g</code>) or sticky (<code>y</code>) regular expressions is applying it to a string and iterating through all of the matches. The new <code>String.prototype.matchAll</code> API makes this easier than ever before, especially for regular expressions with capture groups:<pre class=language-js><code class=language-js><span class="token keyword">const</span> string <span class="token operator">=</span> <span class="token string">'Favorite GitHub repos: tc39/ecma262 v8/v8.dev'</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> regex <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token language-regex regex-source">\b(?&lt;owner>[a-z0-9]+)\/(?&lt;repo>[a-z0-9\.]+)\b</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">;</span><br><br><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> match <span class="token keyword">of</span> string<span class="token punctuation">.</span><span class="token function">matchAll</span><span class="token punctuation">(</span>regex<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string template-punctuation">`</span><span class="token interpolation"><span class="token punctuation interpolation-punctuation">${</span>match<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation interpolation-punctuation">}</span></span><span class="token string"> at </span><span class="token interpolation"><span class="token punctuation interpolation-punctuation">${</span>match<span class="token punctuation">.</span>index<span class="token punctuation interpolation-punctuation">}</span></span><span class="token string"> with '</span><span class="token interpolation"><span class="token punctuation interpolation-punctuation">${</span>match<span class="token punctuation">.</span>input<span class="token punctuation interpolation-punctuation">}</span></span><span class="token string">'</span><span class="token string template-punctuation">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string template-punctuation">`</span><span class="token string">→ owner: </span><span class="token interpolation"><span class="token punctuation interpolation-punctuation">${</span>match<span class="token punctuation">.</span>groups<span class="token punctuation">.</span>owner<span class="token punctuation interpolation-punctuation">}</span></span><span class="token string template-punctuation">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string template-punctuation">`</span><span class="token string">→ repo: </span><span class="token interpolation"><span class="token punctuation interpolation-punctuation">${</span>match<span class="token punctuation">.</span>groups<span class="token punctuation">.</span>repo<span class="token punctuation interpolation-punctuation">}</span></span><span class="token string template-punctuation">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token comment">// Output:</span><br><span class="token comment">//</span><br><span class="token comment">// tc39/ecma262 at 23 with 'Favorite GitHub repos: tc39/ecma262 v8/v8.dev'</span><br><span class="token comment">// → owner: tc39</span><br><span class="token comment">// → repo: ecma262</span><br><span class="token comment">// v8/v8.dev at 36 with 'Favorite GitHub repos: tc39/ecma262 v8/v8.dev'</span><br><span class="token comment">// → owner: v8</span><br><span class="token comment">// → repo: v8.dev</span></code></pre><p>For more details, read <a href=/features/string-matchall>our <code>String.prototype.matchAll</code> explainer</a>.<h3 id=atomics.notify><code>Atomics.notify</code> <a href=#atomics.notify class=bookmark>#</a></h3><p><code>Atomics.wake</code> has been renamed to <code>Atomics.notify</code>, matching <a href=https://github.com/tc39/ecma262/pull/1220>a recent spec change</a>.<h2 id=v8-api>V8 API <a href=#v8-api class=bookmark>#</a></h2><p>Please use <code>git log branch-heads/7.2..branch-heads/7.3 include/v8.h</code> to get a list of the API changes.<p>Developers with an <a href=/docs/source-code#using-git>active V8 checkout</a> can use <code>git checkout -b 7.3 -t branch-heads/7.3</code> to experiment with the new features in V8 v7.3. Alternatively you can <a href=https://www.google.com/chrome/browser/beta.html>subscribe to Chrome’s Beta channel</a> and try the new features out yourself soon.</div><footer><div><picture><source srcset="/_img/avatars/clemens-backes.avif, /_img/avatars/clemens-backes@2x.avif 2x" type=image/avif><img alt="" height=96 loading=lazy src=/_img/avatars/clemens-backes.jpg width=96 srcset="/_img/avatars/clemens-backes@2x.jpg 2x"></picture><p>作者：Clemens Backes, compiler wrangler.</div><a href=https://twitter.com/v8js/status/1093457099441561611 class=retweet>Retweet this article!</a></footer></article></main><footer id=footer><div><nav><a href=https://v8.dev/blog/v8-release-73>原文</a> · <a href=/logo/ >商标</a> · <a href=/terms/ >条款</a> · <a href=https://policies.google.com/privacy/ >隐私</a> · <a href=https://twitter.com/v8js rel="me nofollow">Twitter</a> · <a href=https://github.com/justjavac/v8.js.cn/tree/master/./src/blog/v8-release-73.md rel=nofollow>在 GitHub 编辑此页面</a></nav><dark-mode-toggle dark="Light Theme" light="Dark Theme" permanent></dark-mode-toggle></div><p><small>如无特殊说明，此 V8 项目中使用到的所有示例代码均基于 <a href=https://chromium.googlesource.com/v8/v8.git/+/master/LICENSE>V8's BSD-style license</a> 发布。页面中的文字内容采用 <a href=https://creativecommons.org/licenses/by/3.0/ >the Creative Commons Attribution 3.0 License</a> 进行许可。更详细的信息可以在 <a href=/terms#site-policies>站点策略</a> 中找到。</small></footer><script src=/_js/dark-mode-toggle.mjs type=module></script><script src=/_js/main.mjs type=module></script><script src=/_js/legacy.js nomodule></script>