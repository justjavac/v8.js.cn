<!doctype html><html lang=zh-CN><meta charset=utf-8><title>Intl.ListFormat · V8</title><meta content="width=device-width" name=viewport><meta content="dark light" name=color-scheme><link href=/_css/main.css rel=stylesheet><link href=/_css/feature-support.css rel=stylesheet><link href=/.webmanifest rel=manifest><meta content=#4285F4 name=theme-color><link href=/blog.atom rel=alternate title="V8 Atom feed" type=application/atom+xml><link href=/features.atom rel=alternate title="V8 JS/Wasm features Atom feed" type=application/atom+xml><script>document.documentElement.className+=" js"</script><meta content="The Intl.ListFormat API enables localized formatting of lists without sacrificing performance." name=description><header id=header><h1><a href=/ >V8</a></h1><a href=#navigation-toggle id=nav-toggle>显示导肮</a><nav><ul><li><a href=/ >主页</a><li><a href=/blog/ >博客</a><li><a href=/docs/ >文档</a><li><a href=/tools/ >工具</a><li class=current><a href=/features title="JavaScript 和 WebAssembly 的新特性">JS/Wasm 新特性</a><li><a href=/grant>Research</a></ul></nav></header><main id=main><article itemscope itemtype=http://schema.org/BlogPosting><header><h1 itemprop=headline><code>Intl.ListFormat</code></h1><p class=meta>发布时间 <time datetime="2018-12-18 00:00:00" itemprop=datePublished>2018-12-18</time> · 标签： <a href=/features/tags/intl class=tag>Intl</a></header><div itemprop=articleBody><p>Modern web applications often use lists consisting of dynamic data. For example, a photo viewer app might display something like:<blockquote><p>This photo includes <strong>Ada, Edith, <em>and</em> Grace</strong>.</blockquote><p>A text-based game might have a different kind of list:<blockquote><p>Choose your superpower: <strong>invisibility, psychokinesis, <em>or</em> empathy</strong>.</blockquote><p>Since each language has different list formatting conventions and words, implementing a localized list formatter is non-trivial. Not only does this require a list of all the words (such as “and” or “or” in the above examples) for each language you want to support — in addition you need to encode the exact formatting conventions for all those languages! <a href=http://cldr.unicode.org/translation/lists>The Unicode CLDR</a> provides this data, but to use it in JavaScript, it has to be embedded and shipped alongside the other library code. This unfortunately increases the bundle size for such libraries, which negatively impacts load times, parse/compile cost, and memory consumption.<p>The brand new <code>Intl.ListFormat</code> API shifts that burden to the JavaScript engine, which can ship the locale data and make it directly available to JavaScript developers. <code>Intl.ListFormat</code> enables localized formatting of lists without sacrificing performance.<h2 id=usage-examples>Usage examples <a href=#usage-examples class=bookmark>#</a></h2><p>The following example shows how to create a list formatter for conjunctions using the English language:<pre class=language-js><code class=language-js><span class="token keyword">const</span> lf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Intl<span class="token punctuation">.</span>ListFormat</span><span class="token punctuation">(</span><span class="token string">'en'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>lf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'Frank'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token comment">// → 'Frank'</span><br>lf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'Frank'</span><span class="token punctuation">,</span> <span class="token string">'Christine'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token comment">// → 'Frank and Christine'</span><br>lf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'Frank'</span><span class="token punctuation">,</span> <span class="token string">'Christine'</span><span class="token punctuation">,</span> <span class="token string">'Flora'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token comment">// → 'Frank, Christine, and Flora'</span><br>lf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'Frank'</span><span class="token punctuation">,</span> <span class="token string">'Christine'</span><span class="token punctuation">,</span> <span class="token string">'Flora'</span><span class="token punctuation">,</span> <span class="token string">'Harrison'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token comment">// → 'Frank, Christine, Flora, and Harrison'</span></code></pre><p>Disjunctions (“or” in English) are supported as well through the optional <code>options</code> parameter:<pre class=language-js><code class=language-js><span class="token keyword">const</span> lf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Intl<span class="token punctuation">.</span>ListFormat</span><span class="token punctuation">(</span><span class="token string">'en'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'disjunction'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>lf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'Frank'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token comment">// → 'Frank'</span><br>lf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'Frank'</span><span class="token punctuation">,</span> <span class="token string">'Christine'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token comment">// → 'Frank or Christine'</span><br>lf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'Frank'</span><span class="token punctuation">,</span> <span class="token string">'Christine'</span><span class="token punctuation">,</span> <span class="token string">'Flora'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token comment">// → 'Frank, Christine, or Flora'</span><br>lf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'Frank'</span><span class="token punctuation">,</span> <span class="token string">'Christine'</span><span class="token punctuation">,</span> <span class="token string">'Flora'</span><span class="token punctuation">,</span> <span class="token string">'Harrison'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token comment">// → 'Frank, Christine, Flora, or Harrison'</span></code></pre><p>Here’s an example of using a different language (Chinese, with language code <code>zh</code>):<pre class=language-js><code class=language-js><span class="token keyword">const</span> lf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Intl<span class="token punctuation">.</span>ListFormat</span><span class="token punctuation">(</span><span class="token string">'zh'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>lf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'永鋒'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token comment">// → '永鋒'</span><br>lf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'永鋒'</span><span class="token punctuation">,</span> <span class="token string">'新宇'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token comment">// → '永鋒和新宇'</span><br>lf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'永鋒'</span><span class="token punctuation">,</span> <span class="token string">'新宇'</span><span class="token punctuation">,</span> <span class="token string">'芳遠'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token comment">// → '永鋒、新宇和芳遠'</span><br>lf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'永鋒'</span><span class="token punctuation">,</span> <span class="token string">'新宇'</span><span class="token punctuation">,</span> <span class="token string">'芳遠'</span><span class="token punctuation">,</span> <span class="token string">'澤遠'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token comment">// → '永鋒、新宇、芳遠和澤遠'</span></code></pre><p>The <code>options</code> parameter enables more advanced usage. Here’s an overview of the various options and their combinations, and how they correspond to the list patterns defined by <a href=https://unicode.org/reports/tr35/tr35-general.html#ListPatterns>UTS#35</a>:<div class=table-wrapper><table><thead><tr><th>Type<th>Options<th>Description<th>Examples<tbody><tr><td>standard (or no type)<td><code>{}</code> (default)<td>A typical “and” list for arbitrary placeholders<td><code>'January, February, and March'</code><tr><td>or<td><code>{ type: 'disjunction' }</code><td>A typical “or” list for arbitrary placeholders<td><code>'January, February, or March'</code><tr><td>unit<td><code>{ type: 'unit' }</code><td>A list suitable for wide units<td><code>'3 feet, 7 inches'</code><tr><td>unit-short<td><code>{ type: 'unit', style: 'short' }</code><td>A list suitable for short units<td><code>'3 ft, 7 in'</code><tr><td>unit-narrow<td><code>{ type: 'unit', style: 'narrow' }</code><td>A list suitable for narrow units, where space on the screen is very limited<td><code>'3′ 7″'</code></table></div><p>Note that in many languages (such as English) there may not be a difference among many of these lists. In others, the spacing, the length or presence of a conjunction, and the separators may change.<h2 id=conclusion>Conclusion <a href=#conclusion class=bookmark>#</a></h2><p>As the <code>Intl.ListFormat</code> API becomes more widely available, you’ll find libraries dropping their dependency on hardcoded CLDR databases in favor of the native list formatting functionality, thereby improving load-time performance, parse- and compile-time performance, run-time performance, and memory usage.<h2 id=support><code>Intl.ListFormat</code> support <a href=#support class=bookmark>#</a></h2><ul class=feature-support><li class="environment has-link has-support"><a href=/blog/v8-release-72#intl.listformat><span class="icon chrome">Chrome:</span> <span class=support>自 <span class=version>72</span> 版本开始支持</span></a><li class="environment no-support"><span class="icon firefox">Firefox:</span> <span class=support>不支持</span><li class="environment no-support"><span class="icon safari">Safari:</span> <span class=support>不支持</span><li class="environment has-link has-support"><a href=https://twitter.com/mathias/status/1120700101637353473><span class="icon nodejs">Node.js:</span> <span class=support>自 <span class=version>12</span> 版本开始支持</span></a><li class="environment no-support"><span class="icon babel">Babel:</span> <span class=support>不支持</span></ul><div class=feature-support-info><a href=/features/support>关于特性支持列表</a></div></div><footer><div><picture><source srcset="/_img/avatars/mathias-bynens.avif, /_img/avatars/mathias-bynens@2x.avif 2x" type=image/avif><img alt="" height=96 loading=lazy src=/_img/avatars/mathias-bynens.jpg srcset="/_img/avatars/mathias-bynens@2x.jpg 2x" width=96></picture><picture><source srcset="/_img/avatars/frank-tang.avif, /_img/avatars/frank-tang@2x.avif 2x" type=image/avif><img alt="" height=96 loading=lazy src=/_img/avatars/frank-tang.jpg srcset="/_img/avatars/frank-tang@2x.jpg 2x" width=96></picture><p>作者：Mathias Bynens (<a href=https://twitter.com/mathias>@mathias</a>) and Frank Tang.</div><a href=https://twitter.com/v8js/status/1074966915557351424 class=retweet>Retweet this article!</a></footer></article></main><footer id=footer><div><nav><a href=https://v8.dev/features/intl-listformat>原文</a> · <a href=/logo/ >商标</a> · <a href=/terms/ >条款</a> · <a href=https://policies.google.com/privacy/ >隐私</a> · <a href=https://twitter.com/v8js rel="me nofollow">Twitter</a> · <a href=https://github.com/justjavac/v8.js.cn/tree/master/./src/features/intl-listformat.md rel=nofollow>在 GitHub 编辑此页面</a></nav><dark-mode-toggle dark="Light Theme" light="Dark Theme" permanent></dark-mode-toggle></div><p><small>如无特殊说明，此 V8 项目中使用到的所有示例代码均基于 <a href=https://chromium.googlesource.com/v8/v8.git/+/master/LICENSE>V8's BSD-style license</a> 发布。页面中的文字内容采用 <a href=https://creativecommons.org/licenses/by/3.0/ >the Creative Commons Attribution 3.0 License</a> 进行许可。更详细的信息可以在 <a href=/terms#site-policies>站点策略</a> 中找到。</small></footer><script src=/_js/dark-mode-toggle.mjs type=module></script><script src=/_js/main.mjs type=module></script><script src=/_js/legacy.js nomodule></script>